
<div class="col-xs-12 header">
  <h3>Stock Watch</h3>
</div>
<div class="col-xs-12">

  <div class="col-xs-12 overall-portfolio">
    <div class="col-xs-6">
      <div class="col-xs-6 pLabel">Investments</div>
      <div class="col-xs-6 pValue">{{vm.portfolio.invested_amount}}</div>
    </div>
    <div class="col-xs-6">
      <div class="col-xs-6 pLabel">Change</div>
      <div class="col-xs-6 pValue" ng-class="{positive: vm.portfolio.change > 0, negative: vm.portfolio.change < 0}">{{vm.portfolio.change}}({{vm.portfolio.percent_change}}%)</div>
    </div>
  </div>
  <div class="col-xs-12 edit-options">
    <h4>Update Portfolio</h4>
    <button class="btn btn-success" ng-click = "vm.operation = 'add'">Add</button>
    <button class="btn btn-primary" ng-click = "vm.operation = 'edit'">Edit</button>
    <button class="btn btn-danger" ng-click = "vm.operation = 'delete'">Delete</button>
    <div class="col-xs-12" ng-if = "vm.operation == 'add'">
      <h4>Add Stock</h4>
      <form class="form-horizontal" name="addStock" ng-submit="vm.addStock()">
        <div class="form-group">
          <label for="symbol" class="col-sm-2 control-label">Symbol</label>
          <div class="col-sm-7"><input type="text" class="form-control" id="symbol" required ng-model="vm.formdata.symbol"></div>
        </div>
        <div class="form-group">
          <label for="companyName" class="col-sm-2 control-label">Company Name</label>
          <div class="col-sm-7"><input type="text" class="form-control" id="companyName" readonly ng-model="vm.formdata.company_name"></div>
        </div>
        <div class="form-group">
          <label for="investedPrice" class="col-sm-2 control-label">Invested Price</label>
          <div class="col-sm-7"><input type="number" step="0.01" class="form-control" id="investedPrice" required ng-model="vm.formdata.invested_price"></div>
        </div>
        <div class="form-group">
          <label for="N_stocks" class="col-sm-2 control-label">No of Stocks</label>
          <div class="col-sm-7"><input type="number" step="1" class="form-control" id="N_stocks" required ng-model="vm.formdata.N_stocks"></div>
        </div>
        <div class="form-group">
          <label for="targetPrice" class="col-sm-2 control-label">Target Price</label>
          <div class="col-sm-7"><input type="number" step="0.01" class="form-control" id="targetPrice" required ng-model="vm.formdata.target_price"></div>
        </div>
        <div class="form-group">
          <label for="triggerPriceHigh" class="col-sm-2 control-label">Trigger Price(High)</label>
          <div class="col-sm-7"><input type="number" step="0.01" class="form-control" id="triggerPriceHigh" required ng-model="vm.formdata.trigger_price_high"></div>
        </div>
        <div class="form-group">
          <label for="triggerPriceLow" class="col-sm-2 control-label">Trigger Price(Low)</label>
          <div class="col-sm-7"><input type="number" step="0.01" class="form-control" id="investedPriceLow" required ng-model = "vm.formdata.trigger_price_low"></div>
        </div>
        <button type="submit" class="btn btn-primary">Add</button>
        <button type="submit" class="btn btn-default" ng-click="vm.operation = ''">Clear</button>
      </form>
    </div>
    <div class="col-xs-12" ng-if = "vm.operation == 'delete'">
      Deleting
    </div>
    <div class="col-xs-12" ng-if = "vm.operation == 'edit'">
      Editing
    </div>
  </div>
  <table class="table table-bordered table-hover">
    <tr>
      <th>Company</th>
      <th>Invested Price</th>
      <th>Target Price</th>
      <th>Current Price</th>
      <th>Trigger Price</th>
      <th>Daily Change</th>
      <th>Profit/Loss</th>
    </tr>
    <tr ng-repeat = "stock in vm.stocksList">
      <td>{{stock.companyName}}</td>
      <td>{{stock.invested_price}}</td>
      <td>{{stock.target_price}}</td>
      <td>{{stock.lastPrice}}</td>
      <td>{{stock.trigger_price_low}}/{{stock.trigger_price_high}}</td>
      <td ng-class="{positive: stock.daily_change > 0, negative: stock.daily_change < 0}">{{stock.daily_change}}%</td>
      <td ng-class="{positive: stock.amount_change > 0, negative: stock.amount_change < 0}">{{stock.amount_change}}({{stock.overall_change}}%)</td>
    </tr>
  </table>
</div>
